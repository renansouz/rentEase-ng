<div class="flex flex-col h-full">
  <div class="flex-1 overflow-auto p-4 space-y-2">
    @for (m of messages(); track m.id) {
    <div
      class="p-2 rounded shadow-sm"
      [class.self-end]="m.senderUID === currentUserId()"
    >
      <div class="text-sm font-medium">{{ m.senderName }}</div>
      <div>{{ m.content }}</div>
      <div class="text-xs text-gray-400">
        {{ m.createdAt?.toDate() | date : "shortTime" }}
      </div>
    </div>
    } @empty {
    <p class="text-center text-gray-500">No messages yet.</p>
    }
  </div>

  <form (ngSubmit)="send()" class="p-4 border-t flex space-x-2">
    <textarea
      formControlName="content"
      class="flex-1 border rounded p-2 resize-none"
      rows="2"
      placeholder="Type your messageâ€¦"
    ></textarea>
    <button
      type="submit"
      class="px-4 rounded bg-blue-600 text-white disabled:opacity-50"
      [disabled]="form.invalid"
    >
      Send
    </button>
  </form>
</div>
